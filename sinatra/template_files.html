<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Webapps for Beginners">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="BEd2YAbpSQrRqU2-5wUifTTzvqTMGLLE269b0JZTfCs" />

    <title>Template files | Webapps for Beginners</title>

    <link href="../assets/stylesheets/monstas-4fb1ecb5.css" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/png" href="/assets/images/favicon-870787d6.png" />
  </head>

  <body>
    <nav class="page-nav"><a class="prev" href="/sinatra/layouts.html">
  Previous
</a></nav>
    <nav class="page-nav"><a class="next" href="/sinatra/instance_variables.html">
  Next
</a></nav>

    <div>
      <nav class="toc">
        <h1>Contents</h1>
        <ul>
  <li>
    <a href="/index.html">
      Webapps For Beginners
    </a>
  </li>
  <li>
    <a href="/preface.html">
      Preface
    </a>
  </li>
  <li class="directory">
    <a href="/libraries.html">
      Using Libraries
    </a>
    <ul>
      <li>
        <a href="/libraries/standard_library.html">
          Ruby Standard Library
        </a>
      </li>
      <li>
        <a href="/libraries/rubygems.html">
          Rubygems
        </a>
      </li>
      <li>
        <a href="/libraries/bundler.html">
          Bundler
        </a>
      </li>
      <li>
        <a href="/libraries/load_path.html">
          Ruby load path
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/html.html">
      HTML
    </a>
  </li>
  <li class="directory">
    <a href="/erb.html">
      Embedded Ruby
    </a>
    <ul>
      <li>
        <a href="/erb/erb_templates.html">
          ERB Templates
        </a>
      </li>
      <li>
        <a href="/erb/rendering_erb.html">
          Rendering ERB
        </a>
      </li>
      <li>
        <a href="/erb/bindings.html">
          Bindings
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/http.html">
      HTTP
    </a>
  </li>
  <li class="directory">
    <a href="/rack.html">
      Rack
    </a>
    <ul>
      <li>
        <a href="/rack/hello_world.html">
          Your first Rack app
        </a>
      </li>
      <li>
        <a href="/rack/rack_env.html">
          The Rack Env
        </a>
      </li>
      <li>
        <a href="/rack/method_path.html">
          Method and Path
        </a>
      </li>
    </ul>
  </li>
  <li class="directory expanded">
    <a href="/sinatra.html">
      Sinatra
    </a>
    <ul>
      <li>
        <a href="/sinatra/sinatra_rails.html">
          Sinatra versus Rails
        </a>
      </li>
      <li>
        <a href="/sinatra/dsl.html">
          Domain specific languages
        </a>
      </li>
      <li>
        <a href="/sinatra/hello_world.html">
          Your first Sinatra app
        </a>
      </li>
      <li>
        <a href="/sinatra/routes.html">
          Routes
        </a>
      </li>
      <li>
        <a href="/sinatra/params.html">
          Params
        </a>
      </li>
      <li>
        <a href="/sinatra/templates.html">
          Rendering templates
        </a>
      </li>
      <li>
        <a href="/sinatra/layouts.html">
          Layouts
        </a>
      </li>
      <li class="active">
        <a href="/sinatra/template_files.html">
          Template files
        </a>
      </li>
      <li>
        <a href="/sinatra/instance_variables.html">
          Using instance variables
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/forms.html">
      Forms
    </a>
    <ul>
      <li>
        <a href="/forms/form_tag.html">
          HTML Form Tags
        </a>
      </li>
      <li>
        <a href="/forms/submitting_data.html">
          Submitting Data
        </a>
      </li>
      <li>
        <a href="/forms/accessing_data.html">
          Accessing Form Data
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/storing_data.html">
      Storing data
    </a>
    <ul>
      <li>
        <a href="/storing_data/writing_file.html">
          Writing to a file
        </a>
      </li>
      <li>
        <a href="/storing_data/storing_name.html">
          Storing the name
        </a>
      </li>
      <li>
        <a href="/storing_data/listing_names.html">
          Listing all names
        </a>
      </li>
      <li>
        <a href="/storing_data/using_post.html">
          Using POST
        </a>
      </li>
      <li>
        <a href="/storing_data/redirect.html">
          Using Redirects
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/sessions.html">
      Sessions
    </a>
    <ul>
      <li>
        <a href="/sessions/cookies.html">
          Cookies
        </a>
      </li>
      <li>
        <a href="/sessions/sinatra_sessions.html">
          Sessions in Sinatra
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/validations.html">
      Validations
    </a>
  </li>
  <li class="directory">
    <a href="/resources.html">
      Resources
    </a>
    <ul>
      <li>
        <a href="/resources/groups_routes.html">
          Groups of routes
        </a>
      </li>
      <li>
        <a href="/resources/fake_methods.html">
          Faking HTTP verbs
        </a>
      </li>
      <li>
        <a href="/resources/writing_resources.html">
          Writing resources
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/databases.html">
      Databases
    </a>
    <ul>
      <li>
        <a href="/databases/tables.html">
          Tables
        </a>
      </li>
      <li>
        <a href="/databases/sql.html">
          SQL
        </a>
      </li>
      <li>
        <a href="/databases/sqlite.html">
          SQLite
        </a>
      </li>
      <li>
        <a href="/databases/orm.html">
          Object Relational Mappers
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/migrations.html">
      Migrations
    </a>
    <ul>
      <li>
        <a href="/migrations/database_structure.html">
          Database Structure
        </a>
      </li>
      <li>
        <a href="/migrations/incremental_changes.html">
          Incremental Changes
        </a>
      </li>
      <li>
        <a href="/migrations/rollbacks.html">
          Rollbacks
        </a>
      </li>
      <li>
        <a href="/migrations/tools.html">
          Tools
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/exercises.html">
      Exercises
    </a>
    <ul>
      <li>
        <a href="/exercises/using_rubygems.html">
          Using Rubygems
        </a>
      </li>
      <li>
        <a href="/exercises/using_bundler.html">
          Using Bundler
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox_erb.html">
          Generating HTML with ERB
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox_sinatra.html">
          Mailbox via Sinatra
        </a>
      </li>
      <li>
        <a href="/exercises/sinatra_resource.html">
          Sinatra Resource
        </a>
      </li>
      <li>
        <a href="/exercises/sql.html">
          SQL
        </a>
      </li>
    </ul>
  </li>
</ul>
      </nav>
      <article>
        <nav class="menu"><a href="#"></a></nav>
        <h1>Template files</h1>

<p>So far we&rsquo;ve defined our templates as strings right inside our route. That
worked well because our templates were ridiculously small. Of course, any
real application will have much bigger templates. Managing these inside
our routes would get pretty messy pretty quickly.</p>

<p>It is, therefore, better to store them in separate files. And again, Sinatra
has built-in support for that: when we call the method <code>erb</code> with a symbol
instead of a string, then Sinatra assumes this is part of a filename, and
it will look for a template file in a directory <code>views</code>.</p>

<p>Let&rsquo;s create a new directory <code>views</code>, and add a file <code>monstas.erb</code>, containing
our template:</p>
<pre class="highlight erb"><code><span class="nt">&lt;h1&gt;</span>Hello <span class="cp">&lt;%=</span> <span class="nb">name</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
</code></pre>

<p>Also, add a file <code>layout.erb</code> with our layout template:</p>
<pre class="highlight erb"><code><span class="nt">&lt;html&gt;&lt;body&gt;</span><span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span><span class="nt">&lt;/body&gt;&lt;/html&gt;</span>
</code></pre>

<p>Now we are ready to change our route as follows:</p>
<pre class="highlight ruby"><code><span class="n">get</span> <span class="s1">'/monstas/:name'</span> <span class="k">do</span>
  <span class="n">erb</span> <span class="ss">:monstas</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="p">,</span> <span class="ss">:layout</span> <span class="o">=&gt;</span> <span class="ss">:layout</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>

<p>Restart your application, and reload the page. You should see the same result.</p>

<p>But our code looks much better this way, doesn&rsquo;t it?</p>

<p>Interestingly, we don&rsquo;t even need the name the layout. Sinatra looks for
this filename by default (we could specify a different name though, in case
we need different layout templates in different contexts):</p>
<pre class="highlight ruby"><code><span class="n">get</span> <span class="s1">'/monstas/:name'</span> <span class="k">do</span>
  <span class="n">erb</span> <span class="ss">:monstas</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="n">params</span><span class="p">,</span> <span class="ss">:layout</span> <span class="o">=&gt;</span> <span class="kp">true</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>

<p>And finally, we can also even totally omit the option, because Sinatra
assumes we want a layout and finds one in the <code>views</code> directory:</p>
<pre class="highlight ruby"><code><span class="n">get</span> <span class="s1">'/monstas/:name'</span> <span class="k">do</span>
  <span class="n">erb</span> <span class="ss">:monstas</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:locals</span> <span class="o">=&gt;</span> <span class="n">params</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>

<p>If we don&rsquo;t want a layout, for some reason, then we can pass <code>:layout =&gt; false</code>
instead.</p>

<p>Neat.</p>

        <nav class="page-nav"><a class="prev" href="/sinatra/layouts.html">
  Previous
</a></nav>
        <nav class="page-nav"><a class="next" href="/sinatra/instance_variables.html">
  Next
</a></nav>
      </article>
    </div>

    <footer>
      <ul>
        <li><a href="http://rubymonstas.org">Ruby Monstas</a></li>
        <li><a href="http://ruby-for-beginners.rubymonstas.org">Ruby For Beginners</a></li>
        <li><a href="http://webapps-for-beginners.rubymonstas.org">Webapps For Beginners</a></li>
        <li><a href="http://testing-for-beginners.rubymonstas.org">Testing For Beginners</a></li>
        <li><a href="mailto:ruby.monsters@gmail.com">Email</a></li>
        <li><a href="https://twitter.com/rubymonsters">Twitter</a></li>
        <li><a href="https://github.com/rubymonsters">GitHub</a></li>
        <li><a href="https://creativecommons.org/licenses/by-sa/2.0/" rel="license cc:license">License</a></li>
        <li><a href="http://foundation.travis-ci.org/imprint/">Imprint</a></li>
      </ul>
    </footer>

    <script src="../assets/javascripts/modernizr-4c875d94.js" type="text/javascript"></script>
    <script src="../assets/javascripts/monstas-e84d6217.js" type="text/javascript"></script>
  </body>
</html>
