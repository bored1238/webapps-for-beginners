<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Webapps for Beginners">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="BEd2YAbpSQrRqU2-5wUifTTzvqTMGLLE269b0JZTfCs" />

    <title>Groups of routes | Webapps for Beginners</title>

    <link href="../assets/stylesheets/monstas-4fb1ecb5.css" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/png" href="/assets/images/favicon-870787d6.png" />
  </head>

  <body>
    <nav class="page-nav"><a class="prev" href="/resources.html">
  Previous
</a></nav>
    <nav class="page-nav"><a class="next" href="/resources/fake_methods.html">
  Next
</a></nav>

    <div>
      <nav class="toc">
        <h1>Contents</h1>
        <ul>
  <li>
    <a href="/index.html">
      Webapps For Beginners
    </a>
  </li>
  <li>
    <a href="/preface.html">
      Preface
    </a>
  </li>
  <li class="directory">
    <a href="/libraries.html">
      Using Libraries
    </a>
    <ul>
      <li>
        <a href="/libraries/standard_library.html">
          Ruby Standard Library
        </a>
      </li>
      <li>
        <a href="/libraries/rubygems.html">
          Rubygems
        </a>
      </li>
      <li>
        <a href="/libraries/bundler.html">
          Bundler
        </a>
      </li>
      <li>
        <a href="/libraries/load_path.html">
          Ruby load path
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/html.html">
      HTML
    </a>
  </li>
  <li class="directory">
    <a href="/erb.html">
      Embedded Ruby
    </a>
    <ul>
      <li>
        <a href="/erb/erb_templates.html">
          ERB Templates
        </a>
      </li>
      <li>
        <a href="/erb/rendering_erb.html">
          Rendering ERB
        </a>
      </li>
      <li>
        <a href="/erb/bindings.html">
          Bindings
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/http.html">
      HTTP
    </a>
  </li>
  <li class="directory">
    <a href="/rack.html">
      Rack
    </a>
    <ul>
      <li>
        <a href="/rack/hello_world.html">
          Your first Rack app
        </a>
      </li>
      <li>
        <a href="/rack/rack_env.html">
          The Rack Env
        </a>
      </li>
      <li>
        <a href="/rack/method_path.html">
          Method and Path
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/sinatra.html">
      Sinatra
    </a>
    <ul>
      <li>
        <a href="/sinatra/sinatra_rails.html">
          Sinatra versus Rails
        </a>
      </li>
      <li>
        <a href="/sinatra/dsl.html">
          Domain specific languages
        </a>
      </li>
      <li>
        <a href="/sinatra/hello_world.html">
          Your first Sinatra app
        </a>
      </li>
      <li>
        <a href="/sinatra/routes.html">
          Routes
        </a>
      </li>
      <li>
        <a href="/sinatra/params.html">
          Params
        </a>
      </li>
      <li>
        <a href="/sinatra/templates.html">
          Rendering templates
        </a>
      </li>
      <li>
        <a href="/sinatra/layouts.html">
          Layouts
        </a>
      </li>
      <li>
        <a href="/sinatra/template_files.html">
          Template files
        </a>
      </li>
      <li>
        <a href="/sinatra/instance_variables.html">
          Using instance variables
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/forms.html">
      Forms
    </a>
    <ul>
      <li>
        <a href="/forms/form_tag.html">
          HTML Form Tags
        </a>
      </li>
      <li>
        <a href="/forms/submitting_data.html">
          Submitting Data
        </a>
      </li>
      <li>
        <a href="/forms/accessing_data.html">
          Accessing Form Data
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/storing_data.html">
      Storing data
    </a>
    <ul>
      <li>
        <a href="/storing_data/writing_file.html">
          Writing to a file
        </a>
      </li>
      <li>
        <a href="/storing_data/storing_name.html">
          Storing the name
        </a>
      </li>
      <li>
        <a href="/storing_data/listing_names.html">
          Listing all names
        </a>
      </li>
      <li>
        <a href="/storing_data/using_post.html">
          Using POST
        </a>
      </li>
      <li>
        <a href="/storing_data/redirect.html">
          Using Redirects
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/sessions.html">
      Sessions
    </a>
    <ul>
      <li>
        <a href="/sessions/cookies.html">
          Cookies
        </a>
      </li>
      <li>
        <a href="/sessions/sinatra_sessions.html">
          Sessions in Sinatra
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="/validations.html">
      Validations
    </a>
  </li>
  <li class="directory expanded">
    <a href="/resources.html">
      Resources
    </a>
    <ul>
      <li class="active">
        <a href="/resources/groups_routes.html">
          Groups of routes
        </a>
      </li>
      <li>
        <a href="/resources/fake_methods.html">
          Faking HTTP verbs
        </a>
      </li>
      <li>
        <a href="/resources/writing_resources.html">
          Writing resources
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/databases.html">
      Databases
    </a>
    <ul>
      <li>
        <a href="/databases/tables.html">
          Tables
        </a>
      </li>
      <li>
        <a href="/databases/sql.html">
          SQL
        </a>
      </li>
      <li>
        <a href="/databases/sqlite.html">
          SQLite
        </a>
      </li>
      <li>
        <a href="/databases/orm.html">
          Object Relational Mappers
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/migrations.html">
      Migrations
    </a>
    <ul>
      <li>
        <a href="/migrations/database_structure.html">
          Database Structure
        </a>
      </li>
      <li>
        <a href="/migrations/incremental_changes.html">
          Incremental Changes
        </a>
      </li>
      <li>
        <a href="/migrations/rollbacks.html">
          Rollbacks
        </a>
      </li>
      <li>
        <a href="/migrations/tools.html">
          Tools
        </a>
      </li>
    </ul>
  </li>
  <li class="directory">
    <a href="/exercises.html">
      Exercises
    </a>
    <ul>
      <li>
        <a href="/exercises/using_rubygems.html">
          Using Rubygems
        </a>
      </li>
      <li>
        <a href="/exercises/using_bundler.html">
          Using Bundler
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox_erb.html">
          Generating HTML with ERB
        </a>
      </li>
      <li>
        <a href="/exercises/mailbox_sinatra.html">
          Mailbox via Sinatra
        </a>
      </li>
      <li>
        <a href="/exercises/sinatra_resource.html">
          Sinatra Resource
        </a>
      </li>
      <li>
        <a href="/exercises/sql.html">
          SQL
        </a>
      </li>
    </ul>
  </li>
</ul>
      </nav>
      <article>
        <nav class="menu"><a href="#"></a></nav>
        <h1>Groups of routes</h1>

<p>Imagine we are building an application that allows managing the members of our
study group. There&rsquo;s a way to</p>

<ul>
<li>list all the members</li>
<li>look at a member&rsquo;s details</li>
<li>add a new member</li>
<li>update a member&rsquo;s details</li>
<li>remove a member</li>
</ul>

<p>That&rsquo;s exactly what a <em>lot</em> of web applications do, with certain variations.</p>

<p>Almost all web applications that you use on a daily basis will, in some way or
the other, have lists of things. Amazon has lists of goods, and so has Ebay.
Facebook has lists of posts, and so has Twitter. Gmail obviously has lists of
emails, and so on, and so on. Usually there&rsquo;s a way to display details for
these things, to create new instances (e.g. by publishing a post on Facebook),
editing, and deleting them.</p>

<p>Because this is such a common scheme, Rails has added a first class concept for
this. And, as we do, we are going to re-implement it in Sinatra. This way you&rsquo;ll
have a great understanding of what a &ldquo;resource&rdquo; is in Rails once you get started
with that framework.</p>

<p>Also, for our purposes we&rsquo;ll deviate from Rails just a little bit. And we&rsquo;ll
explain that later.</p>

<p>In a nutshell, Rails defines a <code>resource</code> as a collection of routes that deal
with the same &ldquo;thing&rdquo;. In our example we deal with &ldquo;members&rdquo;, so our resource
will be <code>members</code>.</p>

<p>Here&rsquo;s what the routes that make up our resouce look like:</p>

<ul>
<li><code>GET /members</code> displays a list of all members</li>
<li><code>GET /members/:id</code> displays the details for a single member</li>
<li><code>GET /members/new</code> displays a form for creating a new member</li>
<li><code>POST /members</code> creates a new member from that form</li>
<li><code>GET /members/:id/edit</code> displays a form for editing a member&rsquo;s details</li>
<li><code>PUT /members/:id</code> updates a member&rsquo;s details from that form</li>
<li><code>GET /members/:id/delete</code> asks for confirmation to delete the member</li>
<li><code>DELETE /members/:id</code> deletes the member</li>
</ul>

<p>Here&rsquo;s the same information as a table. Note that we also give names to these
routes [1]:</p>

<table><thead>
<tr>
<th>Name</th>
<th>Method</th>
<th>Path</th>
<th>Function</th>
</tr>
</thead><tbody>
<tr>
<td>index</td>
<td>GET</td>
<td>/members</td>
<td>Display all members</td>
</tr>
<tr>
<td>show</td>
<td>GET</td>
<td>/members/:id</td>
<td>Display a single member</td>
</tr>
<tr>
<td>new</td>
<td>GET</td>
<td>/members/new</td>
<td>Display a form for a new member</td>
</tr>
<tr>
<td>create</td>
<td>POST</td>
<td>/members</td>
<td>Create that new member</td>
</tr>
<tr>
<td>edit</td>
<td>GET</td>
<td>/members/:id/edit</td>
<td>Display a form for editing a member</td>
</tr>
<tr>
<td>update</td>
<td>PUT</td>
<td>/members/:id</td>
<td>Update that member</td>
</tr>
<tr>
<td>delete</td>
<td>GET</td>
<td>/members/:id/delete</td>
<td>Ask for a confirmation to delete</td>
</tr>
<tr>
<td>destroy</td>
<td>DELETE</td>
<td>/members/:id</td>
<td>Delete a member</td>
</tr>
</tbody></table>

<p>These names are the same as the ones that Rails uses, too. We&rsquo;ll use these
names for our templates, in case we need a template. Naming them the same for
every resource that we write, ever, helps others to understand what we&rsquo;re
talking about in an instant.</p>

<p>So lets look at the routes more. If you look at the purpose of our routes,
there are 4 groups:</p>

<ul>
<li><code>index</code> and <code>show</code> are used to display existing data.</li>
<li><code>new</code> and <code>create</code> are used to create a new member.</li>
<li><code>edit</code> and <code>update</code> are used to update a member.</li>
<li><code>delete</code> and <code>destroy</code> are used to delete a member</li>
</ul>

<p>The two pairs <code>new</code> and <code>create</code> as well as <code>edit</code> and <code>update</code> would follow
the same pattern that we&rsquo;ve discussed in the chapter about
<a href="/validations">Validations</a>:</p>

<ul>
<li>The first one request <code>GET</code>s an HTML form for the user to enter some data.</li>
<li>This form is then submitted as another request, using <code>POST</code> or <code>PUT</code>, to the
second route.</li>
<li>The second route validates the data.</li>
<li>If the data is valid it creates/updates the member, and redirects to the show
view, passing a confirmation message.</li>
<li>If the data is not valid it re-renders the form with an error message.</li>
</ul>

<p>For the last pair there&rsquo;s no validation, of course. Instead we just delete the
object and redirect to the index view.</p>

<p>However there&rsquo;s a problem with all this:</p>

<p>Today&rsquo;s browsers still do not allow sending HTTP requests using any other verb
than <code>GET</code> and <code>POST</code>.</p>

<p>Ouch.</p>

<p>So what do we do?</p>

<p>We fake that. Let&rsquo;s see &hellip;</p>

<h2>Footnotes</h2>

<p>[1] For our purposes here we have deviated from Rails a little, and added an
8th route: <code>GET /members/:id/delete</code>. This route displays a page that asks for
a confirmation to delete. In Rails this is solved with a little Javascript box
that pops up and asks this question. However, we don&rsquo;t want to get into
Javascript too much just yet, and adding this route is a just as valid
solution, too. In fact, some web applications out there prefer this over
the Javascript solution.</p>

        <nav class="page-nav"><a class="prev" href="/resources.html">
  Previous
</a></nav>
        <nav class="page-nav"><a class="next" href="/resources/fake_methods.html">
  Next
</a></nav>
      </article>
    </div>

    <footer>
      <ul>
        <li><a href="http://rubymonstas.org">Ruby Monstas</a></li>
        <li><a href="http://ruby-for-beginners.rubymonstas.org">Ruby For Beginners</a></li>
        <li><a href="http://webapps-for-beginners.rubymonstas.org">Webapps For Beginners</a></li>
        <li><a href="http://testing-for-beginners.rubymonstas.org">Testing For Beginners</a></li>
        <li><a href="mailto:ruby.monsters@gmail.com">Email</a></li>
        <li><a href="https://twitter.com/rubymonsters">Twitter</a></li>
        <li><a href="https://github.com/rubymonsters">GitHub</a></li>
        <li><a href="https://creativecommons.org/licenses/by-sa/2.0/" rel="license cc:license">License</a></li>
        <li><a href="http://foundation.travis-ci.org/imprint/">Imprint</a></li>
      </ul>
    </footer>

    <script src="../assets/javascripts/modernizr-4c875d94.js" type="text/javascript"></script>
    <script src="../assets/javascripts/monstas-e84d6217.js" type="text/javascript"></script>
  </body>
</html>
